<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <script type = "text/javascript"></script>
    <style>
        h2 {text-align: center;}
        form {background-color: lightgrey; }
        div {text-align: center;}
    </style>
    <meta charset="UTF-8">
    <title>Converter</title>
</head>
<body>
<form>
    <br>
    <h2>Конвертер валют</h2>
    <div>
        <select name="fromValute" id="fromValute" style="margin: 20px; width: 225px">
            <option th:each="currency : ${allCurrencies}" th:value="${currency}" th:label = "${currency.name}"></option>
        </select>
        <select name="toValute" id="toValute" style="margin: 20px; width: 225px">
            <option th:each="currency : ${allCurrencies}" th:value="${currency}" th:label = "${currency.name}"></option>
        </select>
        <br>
        <input type="text" name="fromAmount" id="fromAmount" style="margin: 20px">
        <input type="text" name="toAmount" id="toAmount" style="margin: 20px">
        <br>
        <button type="button" style="background-color: gray; width: 225px; margin: 20px" onclick="conversionIntoDB();">Конвертировать</button>
    </div>
</form>
</body>
<script>
    //import Big from 'big.js';

    const VALID_INPUT_LENGTH = 18;

    function conversionIntoDB(){
        let sumToConvert = document.getElementById("fromAmount").value;

        if (!checkValidation(sumToConvert)) return;

        let fromValute = document.getElementById("fromValute");

        alert(fromValute.nominal);
    }

    function checkValidation(sumToConvert){
        sumToConvert = sumToConvert.substring(0,VALID_INPUT_LENGTH);

        document.getElementById("fromAmount").value = sumToConvert;

        return Number.isInteger(sumToConvert) || (isFloat(sumToConvert))
    }

    function isFloat(n){
        return Number(n) === n && n % 1 !== 0;
    }
</script>
</html>